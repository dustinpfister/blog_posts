---
title: The autocull component in phaser ce
date: 2018-10-19 17:09:00
tags: [js,phaser]
layout: post
categories: phaser
id: 308
updated: 2018-10-19 17:20:13
version: 1.2
---

The auto cull component in [Phaser ce](https://photonstorm.github.io/phaser-ce/) is a fairly simple component that just adds a two boolean values. One of which can be used to enable auto culling of sprites in a project keeping sprites that are outside of the camera from rendering, and the other is just an inCamera boolean that can be used to find out if a sprite is outside of the camera or not. In this post I will be outlining a simple example that makes use of what is added to sprites in phaser ce thanks to the auto cull component.

<!-- more -->

## 1 - What to know


## 2 - Example of the sprite.inCamera property


### 2.1 - The update pointer method

```js
var updatePointer = function (game) {
 
    var ship = game.data.ship,
    pointer = game.data.pointer;
 
    // default to an invisible pointer, and a viable ship;
    pointer.visible = false;
    ship.renderable = true;
 
    // using ship.inCamera to toggle displaying the pointer
    if (!ship.inCamera) {
        pointer.angle = new Phaser.Point(pointer.centerX, pointer.centerY).angle({
                x: ship.centerX,
                y: ship.centerY
            }) / Math.PI * 180;
        pointer.visible = true;
        ship.renderable = false;
    }
 
};
```

### 2.2 - Make a sprite sheet

```js
// make a sprite sheet
var mkSheet = function (game) {
 
    // sprite sheet generated by canvas
    var canvas = document.createElement('canvas'),
    ctx = canvas.getContext('2d');
    canvas.width = 96;
    canvas.height = 32;
 
    // red box
    ctx.fillStyle = '#ff0000';
    ctx.fillRect(0, 0, 31, 31);
 
    // triangle
    ctx.beginPath();
    ctx.moveTo(34, 8);
    ctx.lineTo(62, 16);
    ctx.lineTo(34, 24);
    ctx.closePath();
    ctx.fill();
    game.cache.addSpriteSheet('sheet', null, canvas, 32, 32, 2, 0, 0);
 
};
```

### 2.3 - The Phaser.Game instance and state object

```js
var game = new Phaser.Game(320, 240, Phaser.AUTO, 'gamearea');
 
game.state.add('incamera', {
 
    create: function () {
 
        game.data = game.data || {};
 
        var data = game.data;
 
        mkSheet(game);
 
        // create the ship, and pointer
        var ship = game.data.ship = game.add.sprite(game.world.centerX, game.world.centerY, 'sheet', 0);
        ship.anchor.set(0.5, 0.5);
        ship.data.dx = 5;
        ship.data.dy = 2;
 
        var pointer = game.data.pointer = game.add.sprite(game.world.centerX, game.world.centerY, 'sheet', 1);
        pointer.anchor.set(0.5, 0.5);
        pointer.visible = false;
 
    },
 
    update: function () {
 
        var ship = game.data.ship;
 
        // update pointer
        updatePointer(game);
 
        // update ship
        ship.x += ship.data.dx;
        ship.y += ship.data.dy;
        ship.x = Phaser.Math.wrap(ship.x, -320, 640);
        ship.y = Phaser.Math.wrap(ship.y, -240, 480);
 
    }
 
});
 
game.state.start('incamera');
```
