---
title: Using Phaser.Signal to use and create events in phaser
date: 2018-10-04 14:49:00
tags: [js,phaser,games]
layout: post
categories: phaser
id: 297
updated: 2018-10-04 20:44:16
version: 1.4
---

Events are a big part of phaser ce game development, and the Phaser.Signal class is the phaser ce standard way of creating, and making use of events in phaser ce. There are many instances of Phaser.Signal to begin with in phaser that can be used to define some handers for when those events occur, but the class can also be used to define events as well. In this post I will be giving some use case examples of Phaser.Signal, including how to make one of my own, but  I will not be covering all the different events that are built in. 

<!-- more -->

## 1 - What to know

This is a post on using Phaser.Signal to create, and use events in phaser ce. Instances of this class pop up now and then whenever I want to do something that involves attaching an event handler for something like user input, or if a player sprite goes out of bounds for example. A Signal in phaser ce works very much like addEventListener in client side javaScript, allowing for me to attach many event handers to the same event.

### 1.1 - This is a phaser ce 2.x post

In this post I am using phaser Community Edition 2.11.0

## 2 - Example using some Signals

### 2.1 - The createOnGameOver helper

```js
var createOnGameOver = function (game) {
 
    // create an signal
    var onGameOver = game.data.onGameOver = new Phaser.Signal();
 
    // append a handler
    onGameOver.add(function () {
 
        // display game over
        game.data.disp.text = 'Game Over';
 
        console.log('game over');
 
    });
 
};
```

### 2.2 - The onPlayerOutBounds helper

```js
var onPlayerOutBounds = function (game) {
 
    var player = game.data.player;
 
    // out of bounds signal
    player.checkWorldBounds = true;
    player.events.onOutOfBounds.add(function () {
 
        player.body.velocity.set(0, 0);
        player.x = 0;
        player.y = 0;
        player.damage(50);
 
        game.data.disp.text = 'health: ' + player.health;
 
        if (player.health <= 0) {
 
            player.health = 0;
 
            // call Signal.dispatch to fire the event
            game.data.onGameOver.dispatch(player);
 
        }
 
    });
 
};
```

### 2.3 - A helper for making a player sprite

```js
// make the player sprite
var mkPlayerSprite = function (game) {
 
    var player = game.data.player = game.add.sprite(0, 0, 'sheet-block', 0);
 
    player.health = 100;
 
    game.data.disp.text = 'health: ' + player.health;
 
    game.physics.enable(player);
    player.body.gravity.set(0, 100);
 
};
```

### 2.4 - Make a sprite sheet helper

```js
// make a sprite sheet
var mkSheet = function (game) {
 
    // sprite sheet generated by canvas
    var canvas = document.createElement('canvas'),
    ctx = canvas.getContext('2d');
    canvas.width = 96;
    canvas.height = 32;
 
    // blue box (player)
    ctx.fillStyle = '#0000ff';
    ctx.fillRect(0, 0, 32, 32);
 
    game.cache.addSpriteSheet('sheet-block', null, canvas, 32, 32, 3, 0, 0);
 
};
```

### 2.5 - Tie everything together

```js
var game = new Phaser.Game(320, 240, Phaser.AUTO, 'gamearea');
 
game.state.add('game', {
 
    create: function () {
 
        // game data object to store game variables
        game.data = {};
 
        // text display object
        var disp = game.data.disp = game.add.text(10, 10, '', {
                fill: 'white',
                font: '15px courier'
            });
 
        // will be using physics
        game.physics.startSystem(Phaser.Physics.ARCADE);
 
        // make a sprite sheet
        mkSheet(game);
 
        // create on game over signal
        createOnGameOver(game);
 
        // make player sprite
        mkPlayerSprite(game);
 
        // on player out of bounds
        onPlayerOutBounds(game);
 
    }
 
});
 
game.state.start('game');
```
