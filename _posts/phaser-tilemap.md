---
title: Starting out with Tile maps in phaser
date: 2018-09-20 18:06:00
tags: [js,phaser]
layout: post
categories: phaser
id: 284
updated: 2018-09-25 09:51:14
version: 1.3
---

When working with [Phaser ce](https://photonstorm.github.io/phaser-ce/) some projects might require the use of a time map. A tile map is a way of creating a an scene with a gird the contains a frame index for eac grid position, and each index refers to a standard texture in a sprite sheet. There is a lot to cover with tile maps, so this post will just be a quick overview of how to get started with them in phaser ce.

<!-- more -->

## 1 - What to know

There is a great deal to know about tile maps in phaser ce, both with tile maps themselves and what is required before hand. This post will just serve as a getting started post with tile maps, and as my content on tile maps grows I will update this post and link to more advanced topics as needed. I will not be getting into every little key detail about phaser of course, and assume that you have at least some background with phaser ce, and javaScript in general. If not you might choose to start with my getting started post on phaser ce, and check out my many other posts on phaser ce that cover other aspects of the framework.


## 2 - Basic tile sheet example

For a basic example of using a tile map, I made an example that is just a single layer, and will cycle throw all possible index values for a tile when it is clicked.

### 2.1 - Create a tilemap instance

```js
// just create a new map, add a tile set image, and return a
// reference to the map
var createMap = function (game) {
 
    // CREATE A TILEMAP
    var map = this.map = game.add.tilemap(null, 32, 32, 6, 6);
 
    // ADD A SPRITE SHEET
    map.addTilesetImage('sheet-blocks');
 
    return map;
 
};
```

### 2.2 - Create at least one layer for the tilemap

```js
// create a layer for the given map
var createLayer = function (map) {
 
    // CREATE A LAYER
    var layer = map.create('my-layer', 6, 6, 32, 32);
 
    // a layer is like a sprite
    // many of the properties and methods are the same
    layer.inputEnabled = true;
    layer.fixedToCamera = false;
    layer.x = 32;
    layer.y = 32;
    layer.events.onInputDown.add(function (layer, pt) {
        var x = Math.floor((pt.x - layer.x) / 32),
        y = Math.floor((pt.y - layer.y) / 32),
        tile = map.getTile(x, y);
        tile.index += 1;
        tile.index = tile.index % 3;
        map.putTile(tile.index, x, y);
    });
 
};
```

### 2.3 - Generate some index data for the map

```js
// set random index data
var setRandomMapIndexData = function (map) {
 
    // map.ForEach can be used to set all index values in
    // an area
    map.forEach(function (tile) {
        tile.index = Math.floor(Math.random() * 2);
    }, this, 0, 0, 6, 6);
 
};
```

### 2.4 - Have a sprite sheet for the map

```js
// make a sprite sheet for the tile sheet
var mkSheet = function () {
 
    // sprite sheet generated by canvas
    var canvas = document.createElement('canvas'),
    ctx = canvas.getContext('2d');
    canvas.width = 96;
    canvas.height = 32;
 
    // green block
    ctx.fillStyle = '#00ff00';
    ctx.fillRect(0, 0, 32, 32);
 
    // red block
    ctx.fillStyle = '#ff0000';
    ctx.fillRect(32, 0, 32, 32);
 
    // blue block
    ctx.fillStyle = '#0000ff';
    ctx.fillRect(64, 0, 32, 32);
 
    // add a single sheet to cache
    game.cache.addSpriteSheet('sheet-blocks', null, canvas, 32, 32, 3, 0, 0);
 
};
```

### 2.5 - Making use of all this with Phaser.Game

```js
var game = new Phaser.Game(320, 240, Phaser.AUTO, 'gamearea');
 
game.state.add('boot', {
 
    create: function () {
 
        // make the sheet
        mkSheet(game);
 
        // first create a map
        var map = createMap(game);
 
        // have at least one layer
        createLayer(map);
 
        // some index data is needed
        setRandomMapIndexData(map);
 
    },
 
    update: function () {}
 
});
 
game.state.start('boot');
```

## 3 - Conclusion