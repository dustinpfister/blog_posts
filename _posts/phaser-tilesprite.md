---
title: Tile Sprites in phaser for repeating backgrounds.
date: 2018-09-19 19:14:00
tags: [js,phaser]
layout: post
categories: phaser
id: 283
updated: 2018-09-20 10:40:48
version: 1.5
---

Tile sprites are a useful way to go about making a repeating background in a [Phaser ce](https://photonstorm.github.io/phaser-ce/) project. A tile Sprite is not to be confused with a tile map which is something completely different. For today I spend a little time playing around with tile sprites, and have found that If I every want to set something up that involves one or more repeating backgrounds, I will want to use a tile sprite.

<!-- more -->

## 1 - what to know

In this post I will be writing about making and using tile sprites in [phaser ce](https://photonstorm.github.io/phaser-ce/) the community edition of the [popular javaScript game frame work](https://phaser.io). I will also be making use of a lot of other aspects of phaser including things like state objects, and making sprite sheets from canvas elements. I will of course not get into every little detail about phaser let alone javaScript in general, but I have written a [getting started post on phaser](/2017/10/04/phaser-getting-started/) a while back.

### 1.1 - this is a phaser ce (2.x) post

Ever sense the release of phaser 3 earlier this year I have started the habit of making in clear what version of phaser I am using when making a post. This is a practice that I should be doing in one manor or another each time anyway. So for this post I was using phaser ce 2.11.0

## 2 - Basic example using a tile sprite in phaser ce

For a basic example of a tile sprite I will need a texture, in this example I will be making once via a canvas element. Once I have a texture that will repeat well I can then use that texture to make a tile sprite by calling game.add.tileSprite. There are some properties that I then can used to work with the tile sprite, but the most important one might be the Phaser.Point instance at the tileSprite.tilePosition property. This what I use to make a repeating texture scroll. In this section I will be covering a basic working example of this.

### 2.1 - The tile sprite helper

```js
// make a tile sprite
var mkTileSprite = function (game) {
 
    var tile = game.add.tileSprite(0, 0, game.world.width, game.world.height, 'sheet-block', 0);
    tile.name = 'tile';
 
    tile.data.i = 0;
    tile.data.i_max = 150;
    tile.data.tick = function () {
 
        this.per = this.i / this.i_max;
 
        this.r = Math.PI * 2 * this.per;
        this.x = Math.cos(this.r) * 64;
        this.y = Math.sin(this.r) * 64;
 
        // set tile position
        tile.tilePosition.set(this.x, this.y);
 
        this.i += 1;
        this.i %= this.i_max;
 
    };
 
};
```

### 2.2 - Making the sprite sheet

```js
var mkSheet = function () {
 
    // sprite sheet generated by canvas
    var canvas = document.createElement('canvas'),
    ctx = canvas.getContext('2d');
    canvas.width = 64;
    canvas.height = 64;
 
    // background
    ctx.fillStyle = '#8a0000';
    ctx.fillRect(0, 0, 64, 64);
 
    // white lines around edges
    ctx.strokeStyle = '#ffffff';
    ctx.strokeRect(0, 0, 64, 64);
 
    // large circle in the center
    ctx.fillStyle = '#4a0000';
    ctx.lineWidth = 3;
    ctx.beginPath()
    ctx.arc(32, 32, 16, 0, Math.PI * 2)
    ctx.fill();
    ctx.stroke();
 
    // small circles at the corners
    ctx.fillStyle = '#ff0000';
    var i = 0,x,y;
    while (i < 4) {
        x = i % 2;
        y = Math.floor(i / 2);
        ctx.beginPath()
        ctx.arc(x * 64, y * 64, 4, 0, Math.PI * 2)
        ctx.fill();
        ctx.stroke();
        i += 1;
    }
 
    // add a single sheet to cache
    game.cache.addSpriteSheet('sheet-block', null, canvas, 64, 64, 1, 0, 0);
 
};
```

### 2.3 - Now to get things working

```js
var game = new Phaser.Game(320, 240, Phaser.AUTO, 'gamearea');
 
game.state.add('boot', {
 
    create: function () {
 
        // make the sheet
        mkSheet(game);
 
        // make the tile sprite
        mkTileSprite(game);
 
    },
 
    update: function () {
 
        // just need to call by tick method
        game.world.getByName('tile').data.tick();
 
    }
 
});
 
game.state.start('boot');
```

## 3 - Conclusion